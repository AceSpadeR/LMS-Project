@page
@model LMS.Pages.Registration.IndexModel

@{
    ViewData["Title"] = "Your Classes";
}


<div class="row">
    <div class="col-6">
        <h1>Your Classes</h1>
    </div>
    <div class="col-6 text-end">
        <a asp-page="Create" class="btn btn-primary">
            <i class="bi bi-plus-lg me-2"></i> Register for a Class
        </a>
    </div>
</div>
<hr />
<table class="table table-hover">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].DepartmentName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].Title)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].CourseNumber)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].Location)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].CreditHours)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].StartTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].EndTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Classes[0].MeetingDays)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <!-- Show student's classes -->
        @if (Model.Classes is not null)
        {
            foreach (var item in Model.Classes)
            {
                <tr onclick="location.href='@Url.Page("../Details", new { id = item.Id })';" style="cursor: pointer;">
                    <td>
                        @Html.DisplayFor(modelItem => item.DepartmentName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Title)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CourseNumber)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Location)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CreditHours)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.StartTime)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.EndTime)
                    </td>
                    <td>
                        @foreach (var day in item.MeetingDays)
                        {
                            var shortDay = GetDayAbbreviation(day.ToString()) + " ";
                            @shortDay
                        }
                    </td>
                    <td class="align-middle">
                        <form method="post" asp-page-handler="Drop">
                            <div>
                                <input type="hidden" name="ClassId" value=@item.Id />
                                <span class="text-danger"></span>
                            </div>
                            <button type="submit" class="btn btn-danger">
                                <i class="bi bi-x-lg"></i> Drop
                            </button>
                        </form>
                    </td>
                </tr>
            }
        }
        
        @if (false)//Model.Registration is not null)
        {
            //foreach (var item in Model.Registration)
            //{
            //    <tr>
            //        <td>
            //            @Html.DisplayFor(modelItem => item.Users.ConfirmPassword)
            //        </td>
            //        <td>
            //            @Html.DisplayFor(modelItem => item.Classes.CourseNumber)
            //        </td>
            //        <td>
            //            <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
            //            <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
            //            <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a> -->
            //        </td>
            //    </tr>
            //}
        }
        
    </tbody>
</table>

@functions {
    string GetDayAbbreviation(string day)
    {
        switch (day)
        {
            case "Monday":
                return "M";
            case "Tuesday":
                return "T";
            case "Wednesday":
                return "W";
            case "Thursday":
                return "TH";
            case "Friday":
                return "F";
            default:
                return day;
        }
    }
}
